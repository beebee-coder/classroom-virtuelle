// src/lib/session.ts
import { type Session, getServerSession } from 'next-auth';
import { authOptions } from '@/lib/auth-options'; // Correction de l'import

// Le type export√© `DummySession` est conserv√© pour √©viter de casser
// les imports dans d'autres fichiers en attendant leur migration.
// Le type r√©el utilis√© sera `Session` de `next-auth`.
export type DummySession = Session;

export const getAuthSession = async (): Promise<Session | null> => {
    try {
        // Utilise la configuration centralis√©e pour obtenir la session c√¥t√© serveur
        const session = await getServerSession(authOptions);
        console.log('üîê [SESSION] Session r√©cup√©r√©e:', session ? 'Oui' : 'Non');
        return session;
    } catch (error) {
        console.error('‚ùå [SESSION] Erreur lors de la r√©cup√©ration de la session:', error);
        return null;
    }
};