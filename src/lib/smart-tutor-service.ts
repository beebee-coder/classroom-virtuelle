// src/lib/smart-tutor-service.ts
export class SmartTutorService {
  private knowledgeBase = {
    math: {
      fractions: "Les fractions repr√©sentent des parties d'un tout. Ex: 3/4 = 3 parts sur 4. Parfait pour partager une pizza! üçï",
      multiplication: "Multiplication = addition r√©p√©t√©e. 3 √ó 4 = 3 + 3 + 3 + 3 = 12",
      division: "Division = partage √©quitable. 12 √∑ 4 = 3, car 12 objets en 4 groupes = 3 par groupe"
    },
    french: {
      conjugation: "Je mange, tu manges, il mange, nous mangeons, vous mangez, ils mangent",
      grammaire: "Le sujet fait l'action, le verbe l'exprime, le compl√©ment compl√®te"
    },
    science: {
      photosynthese: "Plantes + Soleil üåû + Eau üíß + CO2 ‚Üí Nourriture + Oxyg√®ne",
      systeme_solaire: "Mercure, V√©nus, Terre, Mars, Jupiter, Saturne, Uranus, Neptune"
    }
  };

  async chat(messages: any[]): Promise<string> {
    const question = messages[messages.length - 1]?.content.toLowerCase() || '';
    
    // R√©ponses intelligentes bas√©es sur les mots-cl√©s
    if (question.includes('fraction')) return this.knowledgeBase.math.fractions;
    if (question.includes('multipl') || question.includes('fois')) return this.knowledgeBase.math.multiplication;
    if (question.includes('divis') || question.includes('partag')) return this.knowledgeBase.math.division;
    if (question.includes('conjug') || question.includes('verbe')) return this.knowledgeBase.french.conjugation;
    if (question.includes('gramm') || question.includes('accord')) return this.knowledgeBase.french.grammaire;
    if (question.includes('photosynth√®se') || question.includes('plante')) return this.knowledgeBase.science.photosynthese;
    if (question.includes('plan√®te') || question.includes('solaire')) return this.knowledgeBase.science.systeme_solaire;
    
    // R√©ponses p√©dagogiques g√©n√©riques
    const genericResponses = [
      "Excellent question ! Dans Classroom Connector, je peux t'aider √† comprendre tes le√ßons. As-tu un exercice sp√©cifique ?",
      "Je vois que tu es curieux ! Utilise le tableau blanc pour visualiser tes id√©es - c'est g√©nial pour apprendre !",
      "Bonne initiative de demander de l'aide ! Quel sujet √©tudies-tu actuellement ?",
      "N'h√©site pas √† noter cette question dans ton espace √©l√®ve pour en parler avec ton professeur !",
      "Je peux t'aider √† organiser ton travail. As-tu des difficult√©s avec un chapitre particulier ?"
    ];
    
    return genericResponses[Math.floor(Math.random() * genericResponses.length)];
  }
}
