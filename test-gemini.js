// test-gemini.js
require('dotenv').config({ path: '.env.local' });
const { GoogleGenerativeAI } = require('@google/generative-ai');

const apiKey = process.env.GEMINI_API_KEY;

console.log('üîë Cl√© API:', apiKey ? `${apiKey.substring(0, 10)}...` : 'NON TROUV√âE');

async function testGemini() {
  if (!apiKey) {
    console.log('‚ùå ERREUR: GEMINI_API_KEY non trouv√©e. Assurez-vous qu\'elle est dans votre fichier .env.local');
    return;
  }

  try {
    const genAI = new GoogleGenerativeAI(apiKey);
    // Utilisation du mod√®le 'gemini-pro' qui est le plus stable et largement disponible.
    const model = genAI.getGenerativeModel({ model: 'gemini-pro' });
    
    console.log('üîÑ Test de connexion √† Gemini avec le mod√®le "gemini-pro"...');
    const result = await model.generateContent('Dis bonjour en fran√ßais');
    const response = await result.response;
    
    console.log('‚úÖ SUCC√àS! R√©ponse:', response.text());
  } catch (error) {
    console.log('‚ùå ERREUR API:', error.message);
  }
}

testGemini();
